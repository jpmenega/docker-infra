===========================
sudo su
passwd

ip addr show
netplan apply (se precisar reaplicar o DHCP)

vi /etc/ssh/sshd_config (PermitRootLogin yes)
service sshd restart

**Acessar agora por SSH

*se precisar setar IP e Hostname
echo samba-ad-dc0? > /etc/hostname

nano /etc/default/grub
  GRUB_CMDLINE_LINUX="net.ifnames=0 biosdevname=0"

grub-mkconfig -o /boot/grub/grub.cfg

vi /etc/netplan/00-installer-config.yaml
-----
network:
  ethernets:
    eth0:
      addresses:
      - 192.168.1.x/24
      gateway4: 192.168.1.1
      nameservers:
        addresses:
        - 192.168.1.1
        search:
        - uz.intranet
  version: 2
-----
#vim.tiny /etc/network/interfaces
auto eth0
iface eth0 inet static
  address 192.168.16.241
  netmask 255.255.255.0
  gateway 192.168.16.1
  dns-nameservers 192.168.16.1

#vim.tiny /etc/resolv.conf
search medlav.intranet
nameserver 192.168.16.1
----
reboot
netplan apply (nao funcionaria pois alteramos o nome da NIC no GRUB)

(Debian) apt-get install lvm2
*Worker nodes for GlusterFS
cfdisk /dev/sdb (or vdb)
 old- mkfs -t ext4 /dev/sdb1 (or vdb1)
pvcreate /dev/sdb1 (or vdb1) //pvscan
vgcreate vg_gluster /dev/sdb1 (or vdb1) //vgdisplay (****ver sobre tamanho do extent, para armazenar discos de VMs - arquivo grande -  talvez extents maior que o default de 4MiB sejam melhores)
 lvcreate -L 49G --thinpool tpool_gluster vg_gluster
 ou
 lvcreate -L 49G -c 64k --thinpool tpool_gluster vg_gluster
//lvcreate -L 49G -n lv_gluster_samba vg_gluster  //lvdisplay
lvcreate -V 49G --thin -n lv_gluster_samba vg_gluster/tpool_gluster
mkfs.ext4 /dev/mapper/vg_gluster-lv_gluster_samba
mkdir -p /gfs/samba

cfdisk /dev/sdc (or vdc)
 old- mkfs -t ext4 /dev/sdc1 (or vdc1)
pvcreate /dev/sdc1 (or vdc1) //pvscan
vgcreate vg_gluster_shares /dev/sdc1 (or vdc1) //vgdisplay
 lvcreate -L 1023G --thinpool tpool_gluster_shares vg_gluster_shares
 ou
 lvcreate -L 1023G -c 64k --thinpool tpool_gluster_shares vg_gluster_shares
//lvcreate -L 1023G -n lv_gluster_samba vg_gluster  //lvdisplay
lvcreate -V 1023G --thin -n lv_gluster_samba_shares vg_gluster_shares/tpool_gluster_shares
mkfs.ext4 /dev/mapper/vg_gluster_shares-lv_gluster_samba_shares
mkdir -p /gfs/samba_shares


vi /etc/fstab
 old- /dev/sdb1       /gfs/samba   ext4    user_xattr,acl,barrier=1 1 1
/dev/mapper/vg_gluster-lv_gluster_samba       /gfs/samba   ext4    user_xattr,acl,barrier=1 1 1
/dev/mapper/vg_gluster_shares-lv_gluster_samba_shares       /gfs/samba_shares   ext4    user_xattr,acl,barrier=1 1 1

*Primeiro node master e worker (necessario para copia das chaves do Corosync pela task de synchronize):
ssh-keygen
ssh-copy-id root@<demais_nodes_do_grupo_IP>

